(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c7e35e8"],{"0b4d":function(t,e,s){},"7c1f":function(t,e,s){"use strict";s("0b4d")},"8a0e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{color:"#606266"}},[s("el-row",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:20}},[s("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:2}},[s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){t.insertpermit=!0}}},[t._v("添加学生信息")]),s("el-dialog",{staticClass:"stu-input",attrs:{title:"添加学生信息",visible:t.insertpermit},on:{"update:visible":function(e){t.insertpermit=e}}},[s("el-form",{ref:"add_form",attrs:{"status-icon":"",model:t.add_form,rules:t.add_rules}},[s("el-form-item",{attrs:{label:"学生ID","label-width":t.formLabelWidth,prop:"stu_id"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_id,callback:function(e){t.$set(t.add_form,"stu_id",t._n(e))},expression:"add_form.stu_id"}})],1),s("el-form-item",{attrs:{label:"学生姓名","label-width":t.formLabelWidth,prop:"stu_name"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_name,callback:function(e){t.$set(t.add_form,"stu_name",e)},expression:"add_form.stu_name"}})],1),s("el-form-item",{attrs:{label:"学生性别","label-width":t.formLabelWidth,prop:"stu_sex"}},[s("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.add_form.stu_sex,callback:function(e){t.$set(t.add_form,"stu_sex",e)},expression:"add_form.stu_sex"}},[s("el-option",{attrs:{label:"男",value:"男"}}),s("el-option",{attrs:{label:"女",value:"女"}})],1)],1),s("el-form-item",{attrs:{label:"所在院系","label-width":t.formLabelWidth,prop:"stu_class"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_class,callback:function(e){t.$set(t.add_form,"stu_class",e)},expression:"add_form.stu_class"}})],1),s("el-form-item",{attrs:{label:"所在专业","label-width":t.formLabelWidth,prop:"stu_major"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_major,callback:function(e){t.$set(t.add_form,"stu_major",e)},expression:"add_form.stu_major"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.insertpermit=!1,t.insert_fail()}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.insertobj("add_form")}}},[t._v("确 定")])],1)],1)],1),s("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:22}},[s("div",{staticClass:"stu-search",staticStyle:{float:"right"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入学生名搜索",plain:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),s("el-button-group",[s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.search}},[t._v("搜索")]),s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.clearkeyword}},[t._v("清空")])],1)],1)])],1),s("el-row",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:20}},[s("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[s("el-card",{attrs:{shadow:"hover"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),border:"",stripe:""}},[t._l(t.tablelabel,(function(t,e){return s("el-table-column",{key:e,attrs:{prop:e,label:t}})})),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){t.updatepermit=!0,t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),s("el-dialog",{staticClass:"stu-input",attrs:{title:"修改学生信息",visible:t.updatepermit},on:{"update:visible":function(e){t.updatepermit=e}}},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.update_rules}},[s("el-form-item",{attrs:{label:"所在院系","label-width":t.formLabelWidth,prop:"stu_class"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.stu_class,callback:function(e){t.$set(t.form,"stu_class",e)},expression:"form.stu_class"}})],1),s("el-form-item",{attrs:{label:"所在专业","label-width":t.formLabelWidth,prop:"stu_major"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.stu_major,callback:function(e){t.$set(t.form,"stu_major",e)},expression:"form.stu_major"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.updatepermit=!1,t.fail()}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateobj("form")}}},[t._v("确 定")])],1)],1),s("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(s){return s.preventDefault(),t.handleDelete(e.row,e.$index,t.tableData)}}},[t._v("删除 ")])]}}])})],2),s("el-pagination",{staticClass:"stu-input",staticStyle:{"margin-top":"15px"},attrs:{"current-page":t.currentPage,"page-sizes":[4,6,8],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)},r=[],i={name:"Student",data(){return{keywords:"",tableData:[],currentPage:1,pagesize:8,tablelabel:{stu_id:"学生ID",stu_name:"学生名",stu_sex:"性别",stu_class:"院系",stu_major:"专业"},updatepermit:!1,insertpermit:!1,formLabelWidth:"120px",form:{stu_id:"",stu_class:"",stu_major:""},delete_stu_id:"",add_form:{stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""},list:[],update_index:"",add_rules:{stu_id:[{required:!0,message:"请输入学生ID"},{type:"number",message:"学生ID必须为数字"}],stu_name:[{required:!0,message:"请输入学生名",trigger:"blur"}],stu_sex:[{required:!0,message:"请选择性别",trigger:"change"}],stu_class:[{required:!0,message:"请输入学生院系",trigger:"blur"}],stu_major:[{required:!0,message:"请输入学生专业",trigger:"blur"}]},update_rules:{stu_class:[{required:!0,message:"请输入学生院系",trigger:"blur"}],stu_major:[{required:!0,message:"请输入学生专业",trigger:"blur"}]}}},methods:{get_tableData(){this.$axios.get("http://127.0.0.1:8000/sims_app/select_stu/").then(t=>{this.tableData=t.data,this.list=t.data})},handleSizeChange(t){this.pagesize=t},handleCurrentChange(t){this.currentPage=t},handleEdit(t,e){this.form.stu_id=e.stu_id,this.update_index=t},handleDelete(t,e,s){this.delete_stu_id=t.stu_id,this.$confirm("此操作将永久删除学生信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.splice(e,1),this.$axios.post("http://127.0.0.1:8000/sims_app/delete_stu/",{stu_id:this.delete_stu_id}),this.$message({type:"success",center:!0,message:"删除成功!"})}).catch(()=>{this.$message({type:"info",center:!0,message:"已取消删除"})})},updateobj(t){this.$refs[t].validate(t=>{t&&(this.$axios.post("http://127.0.0.1:8000/sims_app/update_stu/",{stu_id:this.form.stu_id,stu_class:this.form.stu_class,stu_major:this.form.stu_major}).then(t=>{200==t.data.code?(this.tableData[this.update_index].stu_class=this.form.stu_class,this.tableData[this.update_index].stu_major=this.form.stu_major,this.update_index="",this.form={stu_id:"",stu_class:"",stu_major:""},this.success()):(this.$message({message:"存在字段未输入，请重新尝试！",center:!0,type:"error"}),this.form={stu_id:"",stu_class:"",stu_major:""})}),this.updatepermit=!1)})},insertobj(t){this.$refs[t].validate(t=>{t&&(this.$axios.post("http://127.0.0.1:8000/sims_app/insert_stu/",{stu_id:this.add_form.stu_id,stu_name:this.add_form.stu_name,stu_sex:this.add_form.stu_sex,stu_class:this.add_form.stu_class,stu_major:this.add_form.stu_major}).then(t=>{200==t.data.code?(this.tableData.unshift(this.add_form),this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""},this.insert_success()):405==t.data.code?(this.$message({message:"学生id已存在，添加失败，请重新尝试！",center:!0,type:"error"}),this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""}):(this.$message({message:"存在字段未输入，请重新尝试！",center:!0,type:"error"}),this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""})}),this.insertpermit=!1)})},fail(){this.$message({message:"已取消修改！",center:!0,type:"info"})},success(){this.$message({message:"修改成功！",center:!0,type:"success"})},insert_fail(){this.$message({message:"已取消添加！",center:!0,type:"info"})},insert_success(){this.$message({message:"添加成功！",center:!0,type:"success"})},clearkeyword(){this.keywords=""},search(){this.tableData=this.tableData.filter(t=>-1!==t.stu_name.indexOf(this.keywords)),console.log(this.list)}},mounted(){this.get_tableData()},watch:{keywords(){""==this.keywords&&(this.tableData=this.list)}}},l=i,o=(s("7c1f"),s("2877")),u=Object(o["a"])(l,a,r,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-1c7e35e8.4b898c3e.js.map