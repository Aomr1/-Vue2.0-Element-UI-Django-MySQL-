(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c7e35e8"],{"0b4d":function(t,e,s){},"7c1f":function(t,e,s){"use strict";s("0b4d")},"8a0e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{color:"#606266"}},[s("el-row",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:20}},[s("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:2}},[s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(e){t.insertpermit=!0}}},[t._v("添加学生信息")]),s("el-dialog",{staticClass:"stu-input",attrs:{title:"添加学生信息",visible:t.insertpermit},on:{"update:visible":function(e){t.insertpermit=e}}},[s("el-form",{attrs:{model:t.add_form}},[s("el-form-item",{attrs:{label:"学生ID","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_id,callback:function(e){t.$set(t.add_form,"stu_id",e)},expression:"add_form.stu_id"}})],1),s("el-form-item",{attrs:{label:"学生姓名","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_name,callback:function(e){t.$set(t.add_form,"stu_name",e)},expression:"add_form.stu_name"}})],1),s("el-form-item",{attrs:{label:"学生性别","label-width":t.formLabelWidth}},[s("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.add_form.stu_sex,callback:function(e){t.$set(t.add_form,"stu_sex",e)},expression:"add_form.stu_sex"}},[s("el-option",{attrs:{label:"男",value:"男"}}),s("el-option",{attrs:{label:"女",value:"女"}})],1)],1),s("el-form-item",{attrs:{label:"所在院系","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_class,callback:function(e){t.$set(t.add_form,"stu_class",e)},expression:"add_form.stu_class"}})],1),s("el-form-item",{attrs:{label:"所在专业","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.add_form.stu_major,callback:function(e){t.$set(t.add_form,"stu_major",e)},expression:"add_form.stu_major"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.insertpermit=!1,t.insert_fail()}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.insertobj(),t.insertpermit=!1}}},[t._v("确 定")])],1)],1)],1),s("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:22}},[s("div",{staticClass:"stu-search",staticStyle:{float:"right"}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入学生名搜索",plain:"",size:"small"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),s("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:t.clearkeyword}},[t._v("清空")])],1)])],1),s("el-row",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:20}},[s("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[s("el-card",{attrs:{shadow:"hover"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.filtableData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),border:"",stripe:""}},[t._l(t.tablelabel,(function(t,e){return s("el-table-column",{key:e,attrs:{prop:e,label:t}})})),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){t.updatepermit=!0,t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),s("el-dialog",{staticClass:"stu-input",attrs:{title:"修改学生信息",visible:t.updatepermit},on:{"update:visible":function(e){t.updatepermit=e}}},[s("el-form",{attrs:{model:t.form}},[s("el-form-item",{attrs:{label:"所在院系","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.stu_class,callback:function(e){t.$set(t.form,"stu_class",e)},expression:"form.stu_class"}})],1),s("el-form-item",{attrs:{label:"所在专业","label-width":t.formLabelWidth}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.stu_major,callback:function(e){t.$set(t.form,"stu_major",e)},expression:"form.stu_major"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.updatepermit=!1,t.fail()}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateobj(),t.updatepermit=!1}}},[t._v("确 定")])],1)],1),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){t.handleDelete(e.$index,e.row),t.deleteobj()}}},[t._v("删除 ")])]}}])})],2),s("el-pagination",{staticClass:"stu-input",staticStyle:{"margin-top":"15px"},attrs:{"current-page":t.currentPage,"page-sizes":[4,6,8],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.tableData.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)},i=[],l={name:"Student",data(){return{keywords:"",tableData:[],currentPage:1,pagesize:8,tablelabel:{stu_id:"学生ID",stu_name:"学生名",stu_sex:"性别",stu_class:"院系",stu_major:"专业"},updatepermit:!1,insertpermit:!1,formLabelWidth:"120px",form:{stu_id:"",stu_class:"",stu_major:""},delete_stu_id:"",add_form:{stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""}}},methods:{get_tableData(){this.$axios.get("http://127.0.0.1:8000/sims_app/select_stu/").then(t=>{this.tableData=t.data})},handleSizeChange(t){this.pagesize=t},handleCurrentChange(t){this.currentPage=t},handleEdit(t,e){this.form.stu_id=e.stu_id,console.log(t,e.stu_id)},handleDelete(t,e){this.delete_stu_id=e.stu_id,console.log(t,e.stu_id)},updateobj(){this.$axios.post("http://127.0.0.1:8000/sims_app/update_stu/",{stu_id:this.form.stu_id,stu_class:this.form.stu_class,stu_major:this.form.stu_major}).then(t=>{200==t.data.code?(this.form={stu_id:"",stu_class:"",stu_major:""},this.success()):(this.$message({message:"存在字段未输入，请重新尝试！",center:!0,type:"error"}),this.form={stu_id:"",stu_class:"",stu_major:""})})},deleteobj(){this.$axios.post("http://127.0.0.1:8000/sims_app/delete_stu/",{stu_id:this.delete_stu_id}).then(t=>{200==t.data.code&&(this.delete_stu_id="",this.$confirm("此操作将永久删除该学生信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message({type:"success",center:!0,message:"删除成功!"}),setTimeout((function(){window.location.reload()}),1700)}).catch(()=>{this.$message({type:"info",center:!0,message:"已取消删除!"})}))})},insertobj(){this.$axios.post("http://127.0.0.1:8000/sims_app/insert_stu/",{stu_id:this.add_form.stu_id,stu_name:this.add_form.stu_name,stu_sex:this.add_form.stu_sex,stu_class:this.add_form.stu_class,stu_major:this.add_form.stu_major}).then(t=>{200==t.data.code?(this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""},this.insert_success()):405==t.data.code?(this.$message({message:"学生id已存在，添加失败，请重新尝试！",center:!0,type:"error"}),this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""}):(this.$message({message:"存在字段未输入，请重新尝试！",center:!0,type:"error"}),this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""})})},fail(){this.$message({message:"已取消修改！",center:!0,type:"info"})},success(){this.$message({message:"修改成功！",center:!0,type:"success"}),setTimeout((function(){window.location.reload()}),1700)},insert_fail(){this.$message({message:"已取消添加！",center:!0,type:"info"})},insert_success(){this.$message({message:"添加成功！",center:!0,type:"success"}),setTimeout((function(){window.location.reload()}),1700)},clearkeyword(){this.keywords=""}},computed:{filtableData(){return this.tableData.filter(t=>-1!==t.stu_name.indexOf(this.keywords))}},mounted(){this.get_tableData()}},o=l,r=(s("7c1f"),s("2877")),n=Object(r["a"])(o,a,i,!1,null,null,null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-1c7e35e8.51284a63.js.map