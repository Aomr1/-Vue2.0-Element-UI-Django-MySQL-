(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a3fe2c6"],{"0c69":function(e,t,r){"use strict";r("d137")},a69b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:20}},[r("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:2}},[r("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(t){e.insertpermit=!0}}},[e._v("添加课程信息")]),r("el-dialog",{staticClass:"cour-input",attrs:{title:"添加课程信息",visible:e.insertpermit},on:{"update:visible":function(t){e.insertpermit=t}}},[r("el-form",{ref:"add_form",attrs:{"status-icon":"",model:e.add_form,rules:e.add_rules}},[r("el-form-item",{attrs:{label:"课程ID","label-width":e.formLabelWidth,prop:"cour_id"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.add_form.cour_id,callback:function(t){e.$set(e.add_form,"cour_id",e._n(t))},expression:"add_form.cour_id"}})],1),r("el-form-item",{attrs:{label:"课程名称","label-width":e.formLabelWidth,prop:"cour_name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.add_form.cour_name,callback:function(t){e.$set(e.add_form,"cour_name",t)},expression:"add_form.cour_name"}})],1),r("el-form-item",{attrs:{label:"课程学分","label-width":e.formLabelWidth,prop:"credit"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.add_form.credit,callback:function(t){e.$set(e.add_form,"credit",t)},expression:"add_form.credit"}})],1),r("el-form-item",{attrs:{label:"课程学时","label-width":e.formLabelWidth,prop:"period"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.add_form.period,callback:function(t){e.$set(e.add_form,"period",t)},expression:"add_form.period"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.insertpermit=!1,e.insert_fail()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.insertobj("add_form")}}},[e._v("确 定")])],1)],1)],1),r("el-col",{staticClass:"cour-search",staticStyle:{"margin-top":"15px"},attrs:{span:22}},[r("div",{staticStyle:{float:"right"}},[r("el-input",{staticStyle:{width:"200px",color:"#606266"},attrs:{placeholder:"请输入课程名搜索",plain:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),r("el-button-group",[r("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.search}},[e._v("搜索")]),r("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:e.clearkeyword}},[e._v("清空")])],1)],1)])],1),r("el-row",{staticStyle:{"margin-left":"0px","margin-right":"0px"},attrs:{gutter:20}},[r("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[r("el-card",{attrs:{shadow:"hover"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"",stripe:""}},[e._l(e.tablelabel,(function(e,t){return r("el-table-column",{key:t,attrs:{prop:t,label:e}})})),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){e.updatepermit=!0,e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")]),r("el-dialog",{staticClass:"cour-input",attrs:{title:"修改课程信息",visible:e.updatepermit},on:{"update:visible":function(t){e.updatepermit=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.update_rules}},[r("el-form-item",{attrs:{label:"课程学分","label-width":e.formLabelWidth,prop:"credit"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.credit,callback:function(t){e.$set(e.form,"credit",t)},expression:"form.credit"}})],1),r("el-form-item",{attrs:{label:"课程学时","label-width":e.formLabelWidth,prop:"period"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.period,callback:function(t){e.$set(e.form,"period",t)},expression:"form.period"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.updatepermit=!1,e.fail()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateobj("form")}}},[e._v("确 定")])],1)],1),r("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(r){return r.preventDefault(),e.handleDelete(t.row,t.$index,e.tableData)}}},[e._v("删除 ")])]}}])})],2),r("el-pagination",{staticClass:"cour-input",staticStyle:{"margin-top":"15px"},attrs:{"current-page":e.currentPage,"page-sizes":[4,6,8],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)},i=[],s={name:"Course",data(){return{keywords:"",tableData:[],currentPage:1,pagesize:8,tablelabel:{cour_id:"课程ID",cour_name:"课程名",credit:"学分",period:"学时"},updatepermit:!1,insertpermit:!1,formLabelWidth:"120px",form:{cour_id:"",credit:"",period:""},delete_cour_id:"",add_form:{cour_id:"",cour_name:"",credit:"",period:""},list:[],update_index:"",add_rules:{cour_id:[{required:!0,message:"请输入课程ID"},{type:"number",message:"课程ID必须为数字"}],cour_name:[{required:!0,message:"请输入课程名",trigger:"blur"}],credit:[{required:!0,message:"请输入课程学分",trigger:"blur"}],period:[{required:!0,message:"请输入课程学时",trigger:"blur"}]},update_rules:{credit:[{required:!0,message:"请输入课程学分",trigger:"blur"}],period:[{required:!0,message:"请输入课程学时",trigger:"blur"}]}}},methods:{get_tableData(){this.$axios.get("http://127.0.0.1:8000/sims_app/select_cour/").then(e=>{this.tableData=e.data,this.list=e.data})},handleSizeChange(e){this.pagesize=e},handleCurrentChange(e){this.currentPage=e},handleEdit(e,t){this.form.cour_id=t.cour_id,this.update_index=e},handleDelete(e,t,r){this.delete_cour_id=e.cour_id,this.$confirm("此操作将永久删除课程信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r.splice(t,1),this.$axios.post("http://127.0.0.1:8000/sims_app/delete_cour/",{cour_id:this.delete_cour_id}),this.$message({type:"success",center:!0,message:"删除成功!"})}).catch(()=>{this.$message({type:"info",center:!0,message:"已取消删除"})})},updateobj(e){this.$refs[e].validate(e=>{e&&(this.$axios.post("http://127.0.0.1:8000/sims_app/update_cour/",{cour_id:this.form.cour_id,credit:this.form.credit,period:this.form.period}).then(e=>{200==e.data.code?(this.tableData[this.update_index].credit=this.form.credit,this.tableData[this.update_index].period=this.form.period,this.update_index="",this.form={cour_id:"",credit:"",period:""},this.success()):(this.$message({message:"存在字段未输入，请重新尝试！",center:!0,type:"error"}),this.form={cour_id:"",credit:"",period:""})}),this.updatepermit=!1)})},insertobj(e){this.$refs[e].validate(e=>{e&&(this.$axios.post("http://127.0.0.1:8000/sims_app/insert_cour/",{cour_id:this.add_form.cour_id,cour_name:this.add_form.cour_name,credit:this.add_form.credit,period:this.add_form.period}).then(e=>{200==e.data.code?(this.tableData.unshift(this.add_form),this.add_form={cour_id:"",cour_name:"",credit:"",period:""},this.insert_success()):405==e.data.code?(this.$message({message:"课程id已存在，添加失败，请重新尝试！",center:!0,type:"error"}),this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""}):(this.$message({message:"存在字段未输入，请重新尝试！",center:!0,type:"error"}),this.add_form={stu_id:"",stu_name:"",stu_sex:"",stu_class:"",stu_major:""})}),this.insertpermit=!1)})},fail(){this.$message({message:"已取消修改！",center:!0,type:"info"})},success(){this.$message({message:"修改成功！",center:!0,type:"success"})},insert_fail(){this.$message({message:"已取消添加！",center:!0,type:"info"})},insert_success(){this.$message({message:"添加成功！",center:!0,type:"success"})},clearkeyword(){this.keywords=""},search(){this.tableData=this.tableData.filter(e=>-1!==e.cour_name.indexOf(this.keywords))}},mounted(){this.get_tableData()},watch:{keywords(){""==this.keywords&&(this.tableData=this.list)}}},o=s,l=(r("0c69"),r("2877")),d=Object(l["a"])(o,a,i,!1,null,null,null);t["default"]=d.exports},d137:function(e,t,r){}}]);
//# sourceMappingURL=chunk-3a3fe2c6.deb3284e.js.map